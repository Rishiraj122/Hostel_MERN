{"ast":null,"code":"var _jsxFileName = \"/Users/sherlock/Desktop/project/HMS2-main/client/src/components/RoomStatus.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport jwt from 'jsonwebtoken';\nimport { useHistory } from 'react-router-dom';\nimport Header from '../components/Header.js';\nimport noticeCSS from '../notice.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst RoomStatus = () => {\n  _s();\n\n  const history = useHistory();\n  const [room, setRoom] = useState([]);\n  const [occupancy, setOccupancy] = useState([]);\n  const item = [];\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n\n    if (token) {\n      const user = jwt.decode(token);\n\n      if (!user) {\n        localStorage.removeItem('token');\n        history.replace('/studentlogin');\n      }\n\n      apiGet();\n    } else {\n      history.push('/studentlogin');\n    }\n  }, []);\n\n  const apiGet = () => {\n    const token = localStorage.getItem('token');\n    const user = jwt.decode(token); //This contains the values of logged user..\n    // console.log it to view\n\n    fetch('http://localhost:1337/api/room').then(response => response.json()).then(json => {\n      for (let i = 0; i < json.user.length; i = i + 1) {\n        if (json.user[i].occupancy <= 18) {\n          //It compares the value of \n          //logged in user and the fetched data set...\n          //the matched email will find the user... \n          //as no two users can have the same email\n          setRoom(json.user[i].room);\n          setOccupancy(json.user[i].occupancy);\n          break;\n        }\n      }\n    });\n    return {\n      item\n    };\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Available Room\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Room:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 7\n        }, this), \" \", room]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Occupancy:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 7\n        }, this), \" \", occupancy]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 3\n  }, this);\n};\n\n_s(RoomStatus, \"dDDTkkiy0HbkLiHENpk67LxhobQ=\", false, function () {\n  return [useHistory];\n});\n\n_c = RoomStatus;\nexport default RoomStatus; // import React, { useEffect } from 'react';\n// import { useState } from 'react'\n// import { useHistory } from 'react-router-dom'\n// const item=[];\n// function RoomStatus(){\n//     async function roomData(){\n//         const url=\"http://localhost:1337/api/room\";\n//         const response = await fetch(url);\n//         const data = await response.json();\n//         for(let i=data.user.length-1;i>=-1;i--){\n//             item.push(data.user[i]);\n//             console.log(data.user[0])\n//         }\n//     }\n//     return(\n//         <div>\n//             <button onClick={roomData}>Rooms</button>\n//             <h1>Wow</h1>\n//             <div>{item.map(i => \n//             <div>\n//                 <p><strong> Occupancy: {i.occupancy}</strong></p>\n//             </div>\n//             )}</div>\n//         </div>\n//     )\n// }\n// export default RoomStatus;\n// // export default class Fetch extends React.Component{\n// //     state={\n// //         loading: true,\n// //         person: null,\n// //     }\n// //     async componentDidMount(){\n// //         const url=\"http://localhost:1337/api/room\";\n// //         const response = await fetch(url);\n// //         const data = await response.json();\n// //         for(let i=data.user.length-1;i>=-1;i--){\n// //             this.setState({person: data, loading: false})\n// //             item.push(data.user[i]);\n// //             console.log(data.user[0])\n// //         }\n// //     }\n// //     render(){\n// //         return <div>\n// //             <center><h1>Room Status</h1></center>\n// //             <div>{item.map(i => \n// //             <div>\n// //                 <p><strong> Occupancy: {i.occupancy}</strong></p>\n// //             </div>\n// //             )}</div>\n// //         </div>\n// //     }\n// // }\n\nvar _c;\n\n$RefreshReg$(_c, \"RoomStatus\");","map":{"version":3,"sources":["/Users/sherlock/Desktop/project/HMS2-main/client/src/components/RoomStatus.js"],"names":["React","useEffect","useState","jwt","useHistory","Header","noticeCSS","RoomStatus","history","room","setRoom","occupancy","setOccupancy","item","token","localStorage","getItem","user","decode","removeItem","replace","apiGet","push","fetch","then","response","json","i","length"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport jwt from 'jsonwebtoken'\nimport { useHistory } from 'react-router-dom'\nimport Header from '../components/Header.js'\nimport noticeCSS from '../notice.module.css';\n\n\nconst RoomStatus = () => {\n\tconst history = useHistory()\n\n\tconst [room, setRoom]= useState([])\n\tconst [occupancy, setOccupancy] = useState([])\n    const item=[];\n\n\tuseEffect(() => {\n\t\tconst token = localStorage.getItem('token')\n\t\tif (token) {\n\t\t\tconst user = jwt.decode(token)\n\t\t\tif (!user) {\n\t\t\t\tlocalStorage.removeItem('token')\n\t\t\t\thistory.replace('/studentlogin')\n\t\t\t} \n\t\t\tapiGet();\n\t\t}\n\t\telse{\n\t\t\thistory.push('/studentlogin')\n\t\t}\n\t}, [])\n\n\tconst apiGet = ()=>{\n\t\tconst token = localStorage.getItem('token')\n\t\tconst user = jwt.decode(token) //This contains the values of logged user..\n\t\t// console.log it to view\n\t\tfetch('http://localhost:1337/api/room')\n        .then((response)=>response.json())\n        .then((json)=>{\n            for(let i=0;i<json.user.length;i=i+1){\n                if(json.user[i].occupancy<=18){//It compares the value of \n\t\t\t\t\t//logged in user and the fetched data set...\n\t\t\t\t\t//the matched email will find the user... \n\t\t\t\t\t//as no two users can have the same email\n                    setRoom(json.user[i].room);\n                    setOccupancy(json.user[i].occupancy);\n                    break;\n\t\t\t\t}\n            }\n\t\t})\n\t\treturn {item}\n    }\n\n\n\t\n\treturn (\n\t\t<div >\n            <h3>Available Room</h3>\n\t\t\t<div>\n\t\t\t<p><strong>Room:</strong> {room}</p>\n\t\t\t<p><strong>Occupancy:</strong> {occupancy}</p>\n\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default RoomStatus\n\n// import React, { useEffect } from 'react';\n// import { useState } from 'react'\n// import { useHistory } from 'react-router-dom'\n\n// const item=[];\n\n// function RoomStatus(){\n//     async function roomData(){\n//         const url=\"http://localhost:1337/api/room\";\n//         const response = await fetch(url);\n//         const data = await response.json();\n//         for(let i=data.user.length-1;i>=-1;i--){\n//             item.push(data.user[i]);\n//             console.log(data.user[0])\n//         }\n//     }\n//     return(\n//         <div>\n//             <button onClick={roomData}>Rooms</button>\n//             <h1>Wow</h1>\n//             <div>{item.map(i => \n//             <div>\n//                 <p><strong> Occupancy: {i.occupancy}</strong></p>\n//             </div>\n\n//             )}</div>\n//         </div>\n//     )\n// }\n// export default RoomStatus;\n\n// // export default class Fetch extends React.Component{\n\n// //     state={\n// //         loading: true,\n// //         person: null,\n// //     }\n\n// //     async componentDidMount(){\n// //         const url=\"http://localhost:1337/api/room\";\n// //         const response = await fetch(url);\n// //         const data = await response.json();\n// //         for(let i=data.user.length-1;i>=-1;i--){\n// //             this.setState({person: data, loading: false})\n// //             item.push(data.user[i]);\n// //             console.log(data.user[0])\n// //         }\n\n// //     }\n\n// //     render(){\n// //         return <div>\n// //             <center><h1>Room Status</h1></center>\n// //             <div>{item.map(i => \n// //             <div>\n// //                 <p><strong> Occupancy: {i.occupancy}</strong></p>\n// //             </div>\n\n// //             )}</div>\n// //         </div>\n// //     }\n// // }"]},"metadata":{},"sourceType":"module"}